version: '3.7'

services:
    mumble-web:
        container_name: mumble-web
        image: mumble-web:latest
        networks:
          mumble-net:
            aliases:
              - web
    mumble-web-proxy:
        container_name: mumble-web-proxy
        image: web-proxy:latest
        ports:
          - "64737:64737"
        networks:
          mumble-net:
            aliases:
              - proxy
    mumble-server:
        container_name: mumble-server
        image: mumble:latest
        ports:
          - "50051:50051"
          - "64738:64738"
        volumes:
          - /opt/mumble/fullchain.pem:/etc/mumble/fullchain.pem:ro
          - /opt/mumble/privkey.pem:/etc/mumble/privkey.pem:ro
          - /opt/mumble/murmur.ini:/etc/mumble/murmur.ini:ro
        networks:
          mumble-net:
            aliases:
              - mumble
    nginx:
        container_name: nginx
        image: nginx:latest
        ports:
          - "80:80"
          - "443:443"
        volumes:
          - /opt/mumble/nginx.conf:/etc/nginx/conf.d/mumble.conf
          - /opt/mumble/fullchain.pem:/etc/mumble/fullchain.pem:ro
          - /opt/mumble/privkey.pem:/etc/mumble/privkey.pem:ro
        networks:
          - mumble-net

networks:
    mumble-net:
